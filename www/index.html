<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <!-- <meta name="format-detection" content="telephone=no"> -->
        <!-- <meta name="msapplication-tap-highlight" content="no"> -->
        <!-- <meta name="viewport" content="initial-scale=1, width= device-width, viewport-fit=cover"> -->
        <!-- <meta name="color-scheme" content="light dark"> -->
        <link rel="stylesheet" href="css/index.css">
        <title>Hello World</title>
    </head>
    <body>
        <header>
            <h1>MoodMusic</h1>
            <!-- <div class="header purple">
                <button class="left icon ion-navicon" name="button"></button>
                <h1>Application title</h1>
              </div> -->
        </header>
        <main>
            <div>
                <h2>Choose your mood</h2>
                <div id="moodContainer">
                    <button id="btnMoodSelector" onclick="moodSelector('HAPPY')">HAPPY</button>
                    <button id="btnMoodSelector" onclick="moodSelector('SAD')">SAD</button>
                    <button id="btnMoodSelector" onclick="moodSelector('LAZY')">LAZY</button>
                    <button id="btnMoodSelector" onclick="moodSelector('...')">...</button>
                    <button id="btnMoodSelector" onclick="moodSelector('...')">...</button>
                    <button id="btnMoodSelector" onclick="moodSelector('...')">...</button>
                </div>
            </div>

            <div id="separator"></div>
            
            <div>
                <h2 id="moodTitle">You don't have an emotion !</h2>
                <h3 id="typeList" onload='changeVisibility("typeList")'>Playlists</h3>
                <div id="playlistContainer">

                </div>
            </div>
        </main>
    </body>

    <script>
        //document.getElementById('typeList').style.visibility = "hidden";
        changeVisibility("typeList");

        function vibrate(time) {
            navigator.vibrate(time);
        }

        function changeVisibility(id, persist) {
            var x = document.getElementById(id);

            if (x.style.visibility === 'hidden' || persist) {
                x.style.visibility = 'visible';
            } else {
                x.style.visibility = 'hidden';
            }
        }

        function moodSelector(params) {
            let playlistsStr = "";

            let playlists = [
                1479458365,
                1276787711,
                8788949122,
                8873745702
            ];


            document.getElementById("moodTitle").innerHTML = "You're " + params;
            vibrate(15)

            playlists.forEach(element =>{
                playlistsStr += '<iframe id="playlist" title="deezer-widget" src="https://widget.deezer.com/widget/auto/playlist/' + element + '?tracklist=false" width="300" height="350" frameborder="0" allowtransparency="true" allow="encrypted-media; clipboard-write"></iframe>';
            });

            document.getElementById("playlistContainer").innerHTML = playlistsStr;

            changeVisibility("typeList", true);
        }
    </script>
</html>
